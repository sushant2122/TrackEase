@page "/dash"

<head>
    <link rel="stylesheet" href="css/Dashboard.css" />
</head>

<h1><b>Dashboard</b></h1>

<div class="flex flex-wrap gap-4">
    <div class="card bg-light-gray" style="width: 15rem;">
        <div class="card-body">
            <h3 class="card-title"><b>Balance</b></h3>
            <h4 class="card-text"><b><span>Npr.</span></b> 234,345</h4>
        </div>
    </div>

    <div class="card bg-light-green" style="width: 18rem;">
        <div class="card-body">
            <h3 class="card-title"><b>Cash Inflows</b></h3>
            <h4 class="card-text"><b><span>Npr.</span></b> 234,345</h4>
        </div>
    </div>

    <div class="card bg-light-red" style="width: 18rem;">
        <div class="card-body">
            <h3 class="card-title"><b>Cash Outflows</b></h3>
            <h4 class="card-text"><b><span>Npr.</span></b> 234,345</h4>
        </div>
    </div>

    <div class="card bg-light-yellow" style="width: 18rem;">
        <div class="card-body">
            <h3 class="card-title"><b>Remaining Debts</b></h3>
            <h4 class="card-text"><b><span>Npr.</span></b> 234,345</h4>
        </div>
    </div>

    <div class="card bg-green" style="width: 18rem;">
        <div class="card-body">
            <h3 class="card-title"><b>Cleared Debts</b></h3>
            <h4 class="card-text"><b><span>Npr.</span></b> 234,345</h4>
        </div>
    </div>
</div>

<div class="mt-5">
    <h1><b>Pending Debts</b></h1>
    <div>
        <table class="table">
            <thead>
                <tr>
                    <th>S.N</th>
                    <th>Title</th>
                    <th>Amount</th>
                    <th>Due Date</th>
                    <th>Tag</th>
                    <th>Source</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Groceries</td>
                    <td>Npr. 2,300</td>
                    <td>2024/04/30</td>
                    <td>Debt</td>
                    <td>Kumari Bank</td>
                    <td>pending</td>
                    <td>
                        <form method="post" onsubmit="handleSubmit(event)">
                            <button type="submit" class="update-button">Clear debt</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="flex1">
    <button type="button" class="btn btn-primary" onclick="openPopup('deposit')">Deposit</button>
    <button type="button" class="btn btn-primary" onclick="openPopup('debt')">Borrow</button>
    <button type="button" class="btn btn-primary" onclick="openPopup('withdraw')">Withdraw</button>
</div>

<!-- Deposit Popup Form -->
<div class="popup-container" id="depositPopup" style="display: none;">
    <div class="popup">
        <button class="close-btn" onclick="closePopup('deposit')">×</button>
        <h3><b>Deposit</b></h3>
        <form id="depositForm">
            <div class="form-group">
                <label for="depositTitle"><b>Title</b></label>
                <input type="text" class="form-control" id="depositTitle" placeholder="Enter deposit title" required />
            </div>
            <div class="form-group">
                <label for="depositTag"><b>Tag</b></label>
                <select class="form-control" id="depositTag" required>
                    <option value="Share">Share</option>
                    <option value="Salary">Salary</option>
                    <option value="Bonus">Bonus</option>
                    <option value="Gift">Gift</option>
                </select>
            </div>
            <div class="form-group">
                <label for="depositAmount"><b>Amount</b></label>
                <input type="number" class="form-control" id="depositAmount" placeholder="Enter amount" required />
            </div>
            <div class="form-group">
                <label for="depositNotes"><b>Notes</b></label>
                <textarea class="form-control" id="depositNotes" placeholder="Enter any notes" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Deposit</button>
        </form>
    </div>
</div>

<!-- Withdraw Popup Form -->
<div class="popup-container" id="withdrawPopup" style="display: none;">
    <div class="popup">
        <button class="close-btn" onclick="closePopup('withdraw')">×</button>
        <h3><b>Withdraw</b></h3>
        <form id="withdrawForm">
            <div class="form-group">
                <label for="withdrawTitle"><b>Title</b></label>
                <input type="text" class="form-control" id="withdrawTitle" placeholder="Enter withdraw title" required />
            </div>
            <div class="form-group">
                <label for="withdrawTag"><b>Tag</b></label>
                <select class="form-control" id="withdrawTag" required>
                    <option value="">Select Tag</option>
                    <option value="Salary">Salary</option>
                    <option value="Bonus">Bonus</option>
                    <option value="Gift">Gift</option>
                </select>
            </div>
            <div class="form-group">
                <label for="withdrawAmount"><b>Amount</b></label>
                <input type="number" class="form-control" id="withdrawAmount" placeholder="Enter amount" required />
            </div>
            <div class="form-group">
                <label for="withdrawNotes"><b>Notes</b></label>
                <textarea class="form-control" id="withdrawNotes" placeholder="Enter any notes" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Withdraw</button>
        </form>
    </div>
</div>

<!-- Debt Popup Form -->
<div class="popup-container" id="debtPopup" style="display: none;">
    <div class="popup">
        <button class="close-btn" onclick="closePopup('debt')">×</button>
        <h3><b>Add Debt</b></h3>
        <form id="debtForm">
            <div class="form-group">
                <label for="debtTitle"><b>Title</b></label>
                <input type="text" class="form-control" id="debtTitle" placeholder="Enter debt title" required />
            </div>
            <div class="form-group">
                <label for="debtAmount"><b>Amount</b></label>
                <input type="number" class="form-control" id="debtAmount" placeholder="Enter amount" required />
            </div>
            <div class="form-group">
                <label for="debtSource"><b>Source</b></label>
                <input type="text" class="form-control" id="debtSource" placeholder="Enter source" required />
            </div>
            <div class="form-group">
                <label for="debtTag"><b>Tag</b></label>
                <select class="form-control" id="debtTag" required>
                    <option value="">Select Tag</option>
                    <option value="Loan">Loan</option>
                    <option value="Credit">Credit</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="debtDueDate"><b>Due Date</b></label>
                <input type="date" class="form-control" id="debtDueDate" required />
            </div>
            <div class="form-group">
                <label for="debtNotes"><b>Notes</b></label>
                <textarea class="form-control" id="debtNotes" placeholder="Enter any notes" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Borrow</button>
        </form>
    </div>
</div>

<script>
    // Function to open the popup
    function openPopup(type) {
        if (type === 'deposit') {
            document.getElementById("depositPopup").style.display = "flex";
        } else if (type === 'debt') {
            document.getElementById("debtPopup").style.display = "flex";
        } else if (type === 'withdraw') {
            document.getElementById("withdrawPopup").style.display = "flex";
        }
    }

    // Function to close the popup
    function closePopup(type) {
        if (type === 'deposit') {
            document.getElementById("depositPopup").style.display = "none";
        } else if (type === 'debt') {
            document.getElementById("debtPopup").style.display = "none";
        } else if (type === 'withdraw') {
            document.getElementById("withdrawPopup").style.display = "none";
        }
    }
</script>
